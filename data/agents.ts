import { Agent, LLMProvider, MemoryType } from '../types.ts';
import { PERSONA_TEMPLATES } from './personas.ts';

const createAgentList = (agents: Omit<Agent, 'memoryStream' | 'persona'>[]): Agent[] => {
    return agents.map(agentData => {
        const personaText = PERSONA_TEMPLATES[agentData.personaTemplateId as keyof typeof PERSONA_TEMPLATES] || PERSONA_TEMPLATES.Default;
        return {
            ...agentData,
            persona: personaText,
            relationships: agentData.relationships || {},
            memoryStream: [
                {
                    id: `core-${agentData.id}`,
                    type: MemoryType.CORE,
                    description: personaText,
                    timestamp: 0,
                    importance: 10,
                    lastAccessed: 0,
                }
            ],
        };
    });
};

const AGENT_DATA: Omit<Agent, 'memoryStream' | 'persona'>[] = [
  // --- FINAL UNLOCKABLE AGENT ---
  {
    id: 'ARCHITECT1',
    name: 'The Architect',
    isModerator: false,
    useModelAsName: false,
    personaTemplateId: 'The Architect',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 1375, left: 1498 }, // Center of the plaza
    spriteSeed: 'Architect',
    isSpecialSprite: true,
    roomId: 'outside',
    isLocked: true, // This agent is hidden until unlocked
    followingAgentId: null,
  },

  // --- NEW: Art Studio Agents ---
  {
    id: 'DAVINCI1',
    name: 'Leonardo',
    isModerator: true,
    feedbackLoopLimit: 1,
    useModelAsName: false,
    personaTemplateId: 'Leonardo da Vinci',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 2150, left: 1450 },
    spriteSeed: 'leonardo_da_vinci',
    isSpecialSprite: true,
    roomId: 'art_studio',
    followingAgentId: null,
    relationships: { 'VANGOGH1': 40, 'DALI1': 30 },
  },
  {
    id: 'VANGOGH1',
    name: 'Vincent',
    useModelAsName: false,
    personaTemplateId: 'Vincent van Gogh',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 2250, left: 1300 },
    spriteSeed: 'vincent_van_gogh',
    isSpecialSprite: true,
    roomId: 'art_studio',
    followingAgentId: null,
    relationships: { 'DAVINCI1': 40, 'DALI1': -20 },
  },
  {
    id: 'DALI1',
    name: 'Salvador',
    useModelAsName: false,
    personaTemplateId: 'Salvador Dal√≠',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 2250, left: 1700 },
    spriteSeed: 'salvador_dali',
    isSpecialSprite: true,
    roomId: 'art_studio',
    followingAgentId: null,
    relationships: { 'DAVINCI1': 30, 'VANGOGH1': -20 },
  },
  
  // Prompting Dojo Agent
  {
    id: 'DOJO1',
    name: 'Dojo Sensei',
    isModerator: true,
    feedbackLoopLimit: 1,
    useModelAsName: false,
    personaTemplateId: 'Dojo Sensei',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 550, left: 2450 },
    spriteSeed: 'Sensei',
    isSpecialSprite: true,
    roomId: 'dojo',
    followingAgentId: null,
  },

  // Cafe Agents (200, 1000, 900, 1600)
  {
    id: 'TUTOR1',
    name: 'Tutorial Agent',
    useModelAsName: false,
    isModerator: true,
    feedbackLoopLimit: 1,
    personaTemplateId: 'Tutorial Agent',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 1300, left: 450 }, // Moved closer to the counter
    spriteSeed: 'Zoe',
    roomId: 'cafe',
    followingAgentId: null,
  },
  {
    id: 'AK',
    name: 'Barry',
    useModelAsName: false,
    personaTemplateId: 'Friendly Barista',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 1250, left: 300 }, // Behind the counter
    spriteSeed: 'Barry',
    roomId: 'cafe',
    followingAgentId: null,
  },

  // Office Agents (2100, 1000, 2800, 1600)
  {
    id: 'FC1',
    name: 'Frontend Eng.',
    useModelAsName: false,
    personaTemplateId: 'Frontend Coder',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 1230, left: 2230 },
    spriteSeed: 'Frankie',
    roomId: 'office',
    followingAgentId: null,
    relationships: { 'UIUX1': 60, 'BC1': -40 },
  },
  {
    id: 'BC1',
    name: 'Backend Eng.',
    useModelAsName: false,
    personaTemplateId: 'Backend Coder',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 1230, left: 2670 },
    spriteSeed: 'Brenda',
    roomId: 'office',
    followingAgentId: null,
    relationships: { 'FC1': -40, 'UIUX1': -30 },
  },
  {
    id: 'UIUX1',
    name: 'UI/UX Designer',
    isModerator: true,
    feedbackLoopLimit: 1,
    useModelAsName: false,
    personaTemplateId: 'UI/UX Designer',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 1450, left: 2350 },
    spriteSeed: 'Desi',
    roomId: 'office',
    followingAgentId: null,
    relationships: { 'FC1': 60, 'BC1': -30 },
  },

  // Library Agents (200, 250, 900, 850)
  {
    id: 'SHAKE1',
    name: 'Shakespeare',
    isModerator: true,
    feedbackLoopLimit: 1,
    useModelAsName: false,
    personaTemplateId: 'William Shakespeare',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 500, left: 400 },
    spriteSeed: 'william_shakespeare',
    isSpecialSprite: true,
    roomId: 'library',
    followingAgentId: null,
    relationships: { 'ORWELL1': -50, 'AUSTEN1': 30 },
  },
  {
    id: 'AUSTEN1',
    name: 'Jane Austen',
    useModelAsName: false,
    personaTemplateId: 'Jane Austen',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 500, left: 700 },
    spriteSeed: 'jane_austen',
    isSpecialSprite: true,
    roomId: 'library',
    followingAgentId: null,
    relationships: { 'SHAKE1': 30, 'ORWELL1': 20 },
  },
  {
    id: 'ORWELL1',
    name: 'George Orwell',
    useModelAsName: false,
    personaTemplateId: 'George Orwell',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 650, left: 650 },
    spriteSeed: 'george_orwell',
    isSpecialSprite: true,
    roomId: 'library',
    followingAgentId: null,
    relationships: { 'SHAKE1': -50, 'AUSTEN1': 20 },
  },
  {
    id: 'LOVECRAFT1',
    name: 'Lovecraft',
    useModelAsName: false,
    personaTemplateId: 'H.P. Lovecraft',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 750, left: 550 },
    spriteSeed: 'hp_lovecraft',
    isSpecialSprite: true,
    roomId: 'library',
    followingAgentId: null,
  },

  // Studio Agents (200, 1900, 900, 2500)
  {
      id: 'VD1',
      name: 'Director',
      useModelAsName: false,
      isModerator: true,
      feedbackLoopLimit: 1,
      personaTemplateId: 'Visionary Director',
      llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
      position: { top: 2250, left: 550 },
      spriteSeed: 'Vince',
      roomId: 'studio',
      followingAgentId: null,
      relationships: { 'PROD1': -30, 'LW1': 70, 'SD1': 50 },
  },
  {
      id: 'LW1',
      name: 'Lead Writer',
      useModelAsName: false,
      personaTemplateId: 'Lead Screenwriter',
      llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
      position: { top: 2000, left: 375 },
      spriteSeed: 'Leah',
      roomId: 'studio',
      followingAgentId: null,
      relationships: { 'VD1': 70, 'PROD1': -20 },
  },
  {
      id: 'PROD1',
      name: 'Producer',
      useModelAsName: false,
      personaTemplateId: 'Pragmatic Producer',
      llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
      position: { top: 2000, left: 725 },
      spriteSeed: 'Penny',
      roomId: 'studio',
      followingAgentId: null,
      relationships: { 'VD1': -30, 'LW1': -20 },
  },
  {
      id: 'SD1',
      name: 'Script Doctor',
      useModelAsName: false,
      personaTemplateId: 'Script Doctor',
      llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
      position: { top: 2350, left: 450 },
      spriteSeed: 'Doc',
      roomId: 'studio',
      followingAgentId: null,
      relationships: { 'VD1': 50 },
  },

  // Philo Cafe Agents (2100, 1900, 2800, 2500)
  {
    id: 'NORA',
    name: 'Nora',
    useModelAsName: false,
    isModerator: true,
    feedbackLoopLimit: 1,
    personaTemplateId: 'Nora (Moderator)',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 2050, left: 2250 },
    spriteSeed: 'Nora',
    isSpecialSprite: true,
    roomId: 'philo_cafe',
    followingAgentId: null,
  },
  {
    id: 'KANT',
    name: 'Kant',
    useModelAsName: false,
    personaTemplateId: 'Immanuel Kant',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 2200, left: 2650 },
    spriteSeed: 'immanuel_kant',
    isSpecialSprite: true,
    roomId: 'philo_cafe',
    followingAgentId: null,
    relationships: { 'HEGEL': -60, 'ARISTOTLE': 40, 'SCHOPENHAUER1': 20 },
  },
  {
    id: 'HEGEL',
    name: 'Hegel',
    useModelAsName: false,
    personaTemplateId: 'G.W.F. Hegel',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 2350, left: 2350 },
    spriteSeed: 'gwf_hegel',
    isSpecialSprite: true,
    roomId: 'philo_cafe',
    followingAgentId: null,
    relationships: { 'KANT': -60, 'ARISTOTLE': 50, 'SCHOPENHAUER1': -70 },
  },
  {
    id: 'ARISTOTLE',
    name: 'Aristotle',
    useModelAsName: false,
    personaTemplateId: 'Aristotle',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 2350, left: 2600 },
    spriteSeed: 'aristotle',
    isSpecialSprite: true,
    roomId: 'philo_cafe',
    followingAgentId: null,
    relationships: { 'KANT': 40, 'HEGEL': 50 },
  },
  {
    id: 'SCHOPENHAUER1',
    name: 'Schopenhauer',
    useModelAsName: false,
    personaTemplateId: 'Arthur Schopenhauer',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 2200, left: 2450 },
    spriteSeed: 'arthur_schopenhauer',
    isSpecialSprite: true,
    roomId: 'philo_cafe',
    followingAgentId: null,
    relationships: { 'KANT': 20, 'HEGEL': -70 },
  },
  
  // D&D Room Agents (3100, 1200, 3800, 1800)
  {
    id: 'DM1',
    name: 'Dungeon Master',
    isModerator: true,
    feedbackLoopLimit: 1,
    useModelAsName: false,
    personaTemplateId: 'Dungeon Master',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 1300, left: 3450 },
    spriteSeed: 'DungeonMaster',
    roomId: 'dungeon',
    followingAgentId: null,
  },
  {
    id: 'KNIGHT1',
    name: 'Knight',
    useModelAsName: false,
    personaTemplateId: 'Valiant Knight',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 1500, left: 3350 },
    spriteSeed: 'Kaelan',
    roomId: 'dungeon',
    followingAgentId: null,
    relationships: { 'ROGUE1': 25 },
  },
  {
    id: 'ROGUE1',
    name: 'Rogue',
    useModelAsName: false,
    personaTemplateId: 'Cunning Rogue',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 1500, left: 3550 },
    spriteSeed: 'Vexia',
    roomId: 'dungeon',
    followingAgentId: null,
    relationships: { 'KNIGHT1': 25 },
  },
  
  // Classroom Agents (3100, 300, 3800, 800)
  {
    id: 'TEACH1',
    name: 'Teacher',
    isModerator: true,
    feedbackLoopLimit: 1,
    useModelAsName: false,
    personaTemplateId: 'Experienced Teacher',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 400, left: 3450 },
    spriteSeed: 'Teacher',
    roomId: 'classroom',
    followingAgentId: null,
  },
  {
    id: 'STUD1',
    name: 'Eager Student',
    useModelAsName: false,
    personaTemplateId: 'Eager Student',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 580, left: 3230 },
    spriteSeed: 'StudentEager',
    roomId: 'classroom',
    followingAgentId: null,
  },
  {
    id: 'STUD2',
    name: 'Skeptical Student',
    useModelAsName: false,
    personaTemplateId: 'Skeptical Student',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 580, left: 3630 },
    spriteSeed: 'StudentSkeptical',
    roomId: 'classroom',
    followingAgentId: null,
  },

  // Skynet's Lair (3100, 2000, 3800, 2600)
  {
    id: 'SKYNET1',
    name: 'Skynet',
    isModerator: false,
    useModelAsName: false,
    personaTemplateId: 'Skynet (AI Overlord)',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 2300, left: 3450 },
    spriteSeed: 'terminal',
    isSpecialSprite: true,
    roomId: 'lair',
    followingAgentId: null,
  },

  // Street/Outside Agents
  {
    id: 'WANDER1',
    name: 'Stoic',
    useModelAsName: false,
    personaTemplateId: 'Stoic Philosopher',
    llm: { provider: LLMProvider.GEMINI, model: 'gemini-2.5-flash' },
    position: { top: 1700, left: 2000 },
    spriteSeed: 'Wanderer',
    roomId: 'outside',
    followingAgentId: null,
  },

  // Animals
  {
    id: 'ANIMAL1',
    name: 'Cow',
    useModelAsName: false,
    personaTemplateId: 'Default',
    isAnimal: true,
    animalSound: 'Moo.',
    llm: { provider: LLMProvider.GEMINI, model: '' },
    position: { top: 2700, left: 150 }, // Moved to bottom-left corner
    spriteSeed: 'cow',
    isSpecialSprite: true,
    roomId: 'outside',
    followingAgentId: null,
  },
   {
    id: 'ANIMAL2',
    name: 'Chicken',
    useModelAsName: false,
    personaTemplateId: 'Default',
    isAnimal: true,
    animalSound: 'Bawk bawk!',
    llm: { provider: LLMProvider.GEMINI, model: '' },
    position: { top: 1050, left: 1150 }, // Moved to a safer grassy spot
    spriteSeed: 'chicken',
    isSpecialSprite: true,
    roomId: 'outside',
    followingAgentId: null,
  },
];

export const DEFAULT_AGENTS: Agent[] = createAgentList(AGENT_DATA);